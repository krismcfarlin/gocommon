package gocommon

import (
	"bytes"
	"fmt"
	"github.com/DusanKasan/parsemail"
	"github.com/stretchr/testify/suite"
	"gorm.io/gorm"
	"io"
	mailservice "net/mail"
	"strings"
	"testing"
	"time"
)

type CommonPetAssistantTestSuite struct {
	suite.Suite
	db *gorm.DB
}

func (s *CommonPetAssistantTestSuite) SetupTest() {

}

func TestCommonTestSuite(t *testing.T) {
	suite.Run(t, new(CommonPetAssistantTestSuite))
}
func (s *CommonPetAssistantTestSuite) Testbase64() {
	a := fmt.Sprintf("https://prodpetclaimshost.azurewebsites.net/verification/orderNumber/details/%v", EncodeB64(ToString(1736)))
	fmt.Println(a)
	s.Require().Equal(a, "https://prodpetclaimshost.azurewebsites.net/verification/orderNumber/details/MTczNg")
}
func (s *CommonPetAssistantTestSuite) TestJWT() {
	result, err := GeneratePetClaimsJWT("Petassistant", []string{"creator"}, "ShhhhImASecretDontTellAnyone", "", "")
	fmt.Println(result, err)
	token, err := ParseToken(result, "ShhhhImASecretDontTellAnyone")
	s.Require().Equal(token.Valid, true)
}
func (s *CommonPetAssistantTestSuite) TestExternalEmail() {
	external := MakeExternalEmail("cherylfallon@hotmail.com")
	internal := MakeInternalEmail(external)
	fmt.Println(external, internal)

	internal2 := MakeInternalEmail(strings.ToUpper("bk9l4jb43u0e55bn07cp@20220420-development-dot-petfoodcompare.appspotmail.com"))
	fmt.Println(internal2)
	s.Require().Equal(internal, "cherylfallon@hotmail.com")
	s.Require().Equal(external, "bk9l4jb43u0e55bn07cp@20220420-development-dot-petfoodcompare.appspotmail.com")
	//bcqh1uu20348n6vwmmgm@20220420-development-dot-petfoodcompare.appspotmail.com
}
func (s *CommonPetAssistantTestSuite) TestAge() {
	age := Age(time.Now().AddDate(-1, 0, 0))
	fmt.Println(age)
	s.Require().Equal(age, float64(1))
	age = Age(time.Now().AddDate(0, -9, 0))
	fmt.Println(age)
	s.Require().Equal(age, float64(.75))
}
func (s *CommonPetAssistantTestSuite) TestGetMail() {
	mailData := "\"X-Google-Smtp-Source: AMsMyM5KGq/MseN41J3wKuZw59W5ousnnVbHveM/7JK6mBQG5WG3rJs6fRDQF+PbCAhopr4wT3Ro\nX-Received: by 2002:a25:ca08:0:b0:6be:395e:9f43 with SMTP id a8-20020a25ca08000000b006be395e9f43mr10297891ybg.382.1665263333643;\n        Sat, 08 Oct 2022 14:08:53 -0700 (PDT)\nARC-Seal: i=1; a=rsa-sha256; t=1665263333; cv=none;\n        d=google.com; s=arc-20160816;\n        b=M5L+cO06mWT5YjLUEphJistjo3sM4KIr2mURhQyYqfjHwMPPA4vBy3Q4wL//TsX9gj\n         tnkKRa181rRh7Mn0YmHvhmOnM7JvFoLe5231CIIrrzHFZ0MrYNlY4pddS1Fj3DiaOoE8\n         VjVXHaDDX8LJTwY7+7+WPhOCm1dK7CUxWLf1Gld5ngTtIDI6J6dD04QCd6jU8eroo/J+\n         FxJR1Cz4v8XONebOEmV3p0usqSc3HrOY/qcftzR1LjtO7hl0z0YE72ut1zOEIPUmPLJE\n         zzm047J6fenC7tefEo7lH/lhGNnL3oI8DFaatlFM5dWZcoWDduD3EDXGuBErfI0kOl4O\n         p2cw==\nARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;\n        h=subject:from:to:content-language:user-agent:mime-version:date\n         :message-id:dkim-signature;\n        bh=Svc4FSrEMQ5pbWxPdDFYP7HpMb/vq3MDj/23/b6REIo=;\n        b=db6jjzZdITJVhsB3zWJzN0KSwQRhCwbZzUAFuVOg8LXHKunEF5cVHYjTzl3i0vB75L\n         jnKJEU7666MSf/P9eY1FUS7Jk88uinpiN7WQDeDCCeLG/IqYUOsh4my7oZkUHZ6dmK20\n         W8dMEDbBShSYEt3ACItiisdTXoDPJ08S7yBMNkzTaTnaFNxBXGlatWUwXVR3znVZkFZB\n         NYKoOhwufOOZtqBoUI598D5DKVNGonm/eN+tmXDyOPpHsV5zrr90IDC2Enu4wvMR4QYd\n         NXSfC2S95e0cCh8GurLHJOojovZNsbxCEUFvbDBuVNJNMVsIUHG3/5/LtaAPvk5wCT/6\n         +yhw==\nARC-Authentication-Results: i=1; gmr-mx.google.com;\n       dkim=pass header.i=@gmail.com header.s=20210112 header.b=cbPfmHS6;\n       spf=pass (google.com: domain of krismcfarlin@gmail.com designates 2607:f8b0:4864:20::1035 as permitted sender) smtp.mailfrom=krismcfarlin@gmail.com;\n       dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com\nReturn-Path: <krismcfarlin@gmail.com>\nReceived: from mail-pj1-x1035.google.com (mail-pj1-x1035.google.com. [2607:f8b0:4864:20::1035])\n        by gmr-mx.google.com with ESMTPS id x129-20020a253187000000b006be92b9dfd7si323627ybx.4.2022.10.08.14.08.53\n        for <kris@20221008-dot-development-dot-petfoodcompare.appspotmail.com>\n        (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);\n        Sat, 08 Oct 2022 14:08:53 -0700 (PDT)\nReceived-SPF: pass (google.com: domain of krismcfarlin@gmail.com designates 2607:f8b0:4864:20::1035 as permitted sender) client-ip=2607:f8b0:4864:20::1035;\nAuthentication-Results: gmr-mx.google.com;\n       dkim=pass header.i=@gmail.com header.s=20210112 header.b=cbPfmHS6;\n       spf=pass (google.com: domain of krismcfarlin@gmail.com designates 2607:f8b0:4864:20::1035 as permitted sender) smtp.mailfrom=krismcfarlin@gmail.com;\n       dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com\nReceived: by mail-pj1-x1035.google.com with SMTP id q10-20020a17090a304a00b0020b1d5f6975so6353748pjl.0\n        for <kris@20221008-dot-development-dot-petfoodcompare.appspotmail.com>; Sat, 08 Oct 2022 14:08:53 -0700 (PDT)\nDKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;\n        d=gmail.com; s=20210112;\n        h=subject:from:to:content-language:user-agent:mime-version:date\n         :message-id:from:to:cc:subject:date:message-id:reply-to;\n        bh=Svc4FSrEMQ5pbWxPdDFYP7HpMb/vq3MDj/23/b6REIo=;\n        b=cbPfmHS6AiEJ1PDrtj+xJ9FCYLkA+X00fLwQAcokRWBWLna1cXpjk3IelfxbmxLjcm\n         j3F8QH1Son/oGZ5qdGTI52gz+60I1RCJ3TN6yGBjq7YoDjj3K2JkucsYoqX+Bs1swCpe\n         DQrwBM6zCziyoRYuinw+aohV6AtE0EAGHugr1oyP5xG0IskzyVkZbIR6iV5d8KFlFGJD\n         x6goQWGPk5fgSfMTKTcqaplETXynYxnFPyy6cN8jNxaBCueNZHHbwhjdZIuLdFWjGL4G\n         oyWhHVHJZOIevyBqBvbTEqd8K8S6NZkpPTbD7YqRllMA7DxBkYMbeyUMLBp7DpMQYAAM\n         ntiw==\nX-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;\n        d=1e100.net; s=20210112;\n        h=subject:from:to:content-language:user-agent:mime-version:date\n         :message-id:x-gm-message-state:from:to:cc:subject:date:message-id\n         :reply-to;\n        bh=Svc4FSrEMQ5pbWxPdDFYP7HpMb/vq3MDj/23/b6REIo=;\n        b=Bb6RmOSjSbkdr+F+tSMigcXqUhIu7eaPOUizFC4df/hHDJxh5BQVeklIYnH7KVf7y+\n         548UhvRHGnalhiVJ9pd9mO909sOb3TluRdrFFBEaBDPDMTCZiqHABY31Hvot612E+9Se\n         OfRgZdaj4xDQSlZ87tZXQr5KXjA29WNY7CGQ2dJruFdg3euEzDsk39kW+Z/Iz3XXzj5D\n         RdZotr8Cd5OfWeNXhf5qMlh3svPkG/NlDGkIBunj3oRI6yMHAnX/4tOJ4qPjpr0xmdJP\n         assjsDn7mtQkmHUtM/k2Yi5Rm2EOwusAcrH7wR/sGeB5GJDAu2DcsXhhPHg6DOAO3XJV\n         43Ng==\nX-Gm-Message-State: ACrzQf2+3SHbY9atSmYMTKTsCXmmB138ICMNVKvH0FFKqsrepOFO5iGT\n\tIwM8C+UaOEGU0g/MxI+hZvh8zPxGwdo=\nX-Received: by 2002:a17:902:d894:b0:179:e82d:a0a2 with SMTP id b20-20020a170902d89400b00179e82da0a2mr11715077plz.16.1665263332496;\n        Sat, 08 Oct 2022 14:08:52 -0700 (PDT)\nReturn-Path: <krismcfarlin@gmail.com>\nReceived: from ?IPV6:2001:569:5008:f300:57ac:6764:f3b8:366b? (node-1w7jr9phmmu826o31d0p6jwq3.ipv6.telus.net. [2001:569:5008:f300:57ac:6764:f3b8:366b])\n        by smtp.gmail.com with ESMTPSA id q14-20020a170902a3ce00b0018099c9618esm2181940plb.231.2022.10.08.14.08.51\n        for <kris@20221008-dot-development-dot-petfoodcompare.appspotmail.com>\n        (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);\n        Sat, 08 Oct 2022 14:08:52 -0700 (PDT)\nContent-Type: multipart/mixed; boundary=\"------------H5CwLVsueYV73N2vSLSn4eVP\"\nMessage-ID: <29473c41-8583-f7a7-fc40-4692cedb6f5c@gmail.com>\nDate: Sat, 8 Oct 2022 14:08:50 -0700\nMIME-Version: 1.0\nUser-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:102.0) Gecko/20100101\n Thunderbird/102.2.2\nContent-Language: en-US\nTo: kris@20221008-dot-development-dot-petfoodcompare.appspotmail.com\nFrom: Kris McFarlin <krismcfarlin@gmail.com>\nSubject: test10\n\nThis is a multi-part message in MIME format.\n--------------H5CwLVsueYV73N2vSLSn4eVP\nContent-Type: text/plain; charset=UTF-8; format=flowed\nContent-Transfer-Encoding: 7bit\n\ntest10\n\n--------------H5CwLVsueYV73N2vSLSn4eVP\nContent-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;\n name=\"Shipped10072022 (1).xlsx\"\nContent-Disposition: attachment; filename=\"Shipped10072022 (1).xlsx\"\nContent-Transfer-Encoding: base64\n\nUEsDBBQABgAIAAAAIQCeLGxvawEAABAFAAATAAgCW0NvbnRlbnRfVHlwZXNdLnhtbCCiBAIo\noAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACslMFOwzAMhu9IvEOVK2qzcUAIrdthwBEm\nMR4gJO4aLU2iOBvb2+NmY0KorELrpVEb+/+/uHYms11jsi0E1M6WbFyMWAZWOqXtqmTvy+f8\nnmUYhVXCOAsl2wOy2fT6arLce8CMsi2WrI7RP3COsoZGYOE8WNqpXGhEpNew4l7ItVgBvx2N\n7rh0NoKNeWw12HTyCJXYmJg97ejzgSSAQZbND4GtV8mE90ZLEYmUb6365ZIfHQrKTDFYa483\nhMF4p0O787fBMe+VShO0gmwhQnwRDWHwneGfLqw/nFsX50U6KF1VaQnKyU1DFSjQBxAKa4DY\nmCKtRSO0/eY+45+CkadlPDBIe74k3MMR6X8DT8/LEZJMjyHGvQEcuuxJtM+5FgHUWww0GYMD\n/NTu4ZDCyHlNLTJwEU665/ypbxfBeaQJDvB/gO8RbbNzT0IQoobTkHY1+8mRpv/iE0N7vyhQ\nHd483WfTLwAAAP//AwBQSwMEFAAGAAgAAAAhALVVMCP0AAAATAIAAAsACAJfcmVscy8ucmVs\ncyCiBAIooAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACskk1PwzAMhu9I/IfI99XdkBBC\nS3dBSLshVH6ASdwPtY2jJBvdvyccEFQagwNHf71+/Mrb3TyN6sgh9uI0rIsSFDsjtnethpf6\ncXUHKiZylkZxrOHEEXbV9dX2mUdKeSh2vY8qq7iooUvJ3yNG0/FEsRDPLlcaCROlHIYWPZmB\nWsZNWd5i+K4B1UJT7a2GsLc3oOqTz5t/15am6Q0/iDlM7NKZFchzYmfZrnzIbCH1+RpVU2g5\nabBinnI6InlfZGzA80SbvxP9fC1OnMhSIjQS+DLPR8cloPV/WrQ08cudecQ3CcOryPDJgosf\nqN4BAAD//wMAUEsDBBQABgAIAAAAIQBfYtMPOAMAADUIAAAPAAAAeGwvd29ya2Jvb2sueG1s\npFVhb5swEP0+af/B8ncKToElqKQiIWiR2ipqsnaTKlUuOMEqYGZMk6raf98ZQtos05S1KLGx\n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\nCwC+AgAA0iMAAAAA\n\n--------------H5CwLVsueYV73N2vSLSn4eVP--\n\""
	m, err := mailservice.ReadMessage(bytes.NewReader([]byte(mailData)))
	if err != nil {
		fmt.Println(err)
	}
	body, err := io.ReadAll(m.Body)
	if err != nil {
		fmt.Println(err)
	}
	fmt.Println(body)
	emailrec, err := parsemail.Parse(strings.NewReader(mailData))
	if err != nil {
		fmt.Println(err)
	}
	fmt.Println(emailrec.TextBody)
	fmt.Println(m.Header.Get("From"))
}
